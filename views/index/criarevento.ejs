<div class="container-fluid">

    <div class="row">
        <div class="col-sm-6">
            <div class="mb-3">
                <label class="from-label" for="inputNome">Nome</label>
                <input class="form-control" type="text" maxlength="100" id="inputNome"/>
            </div>
        </div>

        <div class="col-sm-6">
            <div class="mb-3">
                <label class="from-label" for="inputDescricao">Descrição</label>
                <input class="form-control" type="text" maxlength="100" id="inputDescricao"/>
            </div>
        </div>

    </div>

    <div class="text-center">
        <button type="button" class="btn btn-primary" onclick="criarEvento()">Criar evento</button>
    </div>

</div>

<script type="text/javascript">
    
        async function criarEvento() {
           
            let inputNome = document.getElementById("inputNome");
            let inputDescricao = document.getElementById("inputDescricao");
        
            let nome = inputNome.value;
            let descricao = inputDescricao.value;
            
           

            if (!nome) {
                alert("Nome inválido!");
                return;
            }

            if (!descricao) {
                alert("Autor inválido!");
                return;
            }

            let evento = {
                nome: nome,
                descricao: descricao
            };

            try {

                let response = await fetch("/api/criarevento", {
                    method: "POST",
                    body: JSON.stringify(evento),
                    headers: {
                        "content-type": "application/json"
                    }
                });
                
                if (!response.ok) {
                    alert("Ocorreu um erro ao criar o evento");
                    return;
                }

                inputNome.value = "";
                inputDescricao.value = "";

                alert("Evento criado com sucesso");

            } catch(ex) {
                alert("Ocorreu um erro de rede ao criar o evento: " + ex.message);
            }
        }
</script>